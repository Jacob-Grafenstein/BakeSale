Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _jsxFileName='src/components/DealDetail.js';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);var _reactNative=require('react-native');var _util=require('../util');var _ajax=require('../ajax');var _ajax2=_interopRequireDefault(_ajax);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var DealDetail=function(_Component){_inherits(DealDetail,_Component);function DealDetail(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DealDetail);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DealDetail.__proto__||Object.getPrototypeOf(DealDetail)).call.apply(_ref,[this].concat(args))),_this),_this.imagePanResponder=_reactNative.PanResponder.create({onStartShouldSetPanResponder:function onStartShouldSetPanResponder(){return true;},onPanResponderMove:function onPanResponderMove(evt,gs){console.log('MOVING',gs.dx);},onPanResponderRelease:function onPanResponderRelease(evt,gs){console.log('RELEASED');}}),_this.state={deal:_this.props.initialDealData,imageIndex:0},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(DealDetail,[{key:'componentDidMount',value:function componentDidMount(){var fullDeal;return regeneratorRuntime.async(function componentDidMount$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(_ajax2.default.fetchDealDetail(this.state.deal.key));case 2:fullDeal=_context.sent;this.setState({deal:fullDeal});case 4:case'end':return _context.stop();}}},null,this);}},{key:'render',value:function render(){var deal=this.state.deal;var backKey="< Back";return _react2.default.createElement(_reactNative.View,{style:styles.card,__source:{fileName:_jsxFileName,lineNumber:46}},_react2.default.createElement(_reactNative.TouchableOpacity,{onPress:this.props.onBack,__source:{fileName:_jsxFileName,lineNumber:47}},_react2.default.createElement(_reactNative.Text,{style:styles.backButton,__source:{fileName:_jsxFileName,lineNumber:48}},backKey)),_react2.default.createElement(_reactNative.Image,_extends({},this.imagePanResponder.panHandlers,{source:{uri:deal.media[this.state.imageIndex]},style:styles.image,__source:{fileName:_jsxFileName,lineNumber:50}})),_react2.default.createElement(_reactNative.View,{style:styles.information,__source:{fileName:_jsxFileName,lineNumber:55}},_react2.default.createElement(_reactNative.View,{style:styles.topBar,__source:{fileName:_jsxFileName,lineNumber:56}},_react2.default.createElement(_reactNative.Text,{style:styles.title,__source:{fileName:_jsxFileName,lineNumber:57}},deal.title),_react2.default.createElement(_reactNative.View,{style:styles.footer,__source:{fileName:_jsxFileName,lineNumber:58}},_react2.default.createElement(_reactNative.Text,{style:styles.cause,__source:{fileName:_jsxFileName,lineNumber:59}},deal.cause.name),_react2.default.createElement(_reactNative.Text,{style:styles.price,__source:{fileName:_jsxFileName,lineNumber:60}},(0,_util.priceDisplay)(deal.price)))),_react2.default.createElement(_reactNative.View,{style:styles.detailInfo,__source:{fileName:_jsxFileName,lineNumber:63}},deal.user&&_react2.default.createElement(_reactNative.View,{style:styles.userProfile,__source:{fileName:_jsxFileName,lineNumber:65}},_react2.default.createElement(_reactNative.Image,{source:{uri:deal.user.avatar},style:styles.avatar,__source:{fileName:_jsxFileName,lineNumber:66}}),_react2.default.createElement(_reactNative.Text,{style:styles.username,__source:{fileName:_jsxFileName,lineNumber:67}},deal.user.name)),_react2.default.createElement(_reactNative.View,{style:styles.detailDescription,__source:{fileName:_jsxFileName,lineNumber:70}},_react2.default.createElement(_reactNative.Text,{__source:{fileName:_jsxFileName,lineNumber:71}},deal.description)))));}}]);return DealDetail;}(_react.Component);DealDetail.propTypes={initialDealData:_propTypes2.default.object.isRequired,onBack:_propTypes2.default.func.isRequired};exports.default=DealDetail;var styles=_reactNative.StyleSheet.create({card:{margin:10},backButton:{marginBottom:10},image:{width:'100%',height:150},information:{padding:10,backgroundColor:'white',borderColor:'#bbb',borderWidth:1,borderTopWidth:0},title:{fontSize:15,fontWeight:'bold',marginBottom:5},topBar:{paddingBottom:30,borderBottomWidth:1,borderColor:'#bbb'},footer:{flexDirection:'row'},price:{flex:2,textAlign:'right'},cause:{flex:1,fontStyle:'italic'},avatar:{borderRadius:30,width:60,height:60,alignSelf:'center'},detailInfo:{flexDirection:'row',marginTop:30},userProfile:{flex:1,marginRight:10},username:{textAlign:'center'},detailDescription:{flex:2}});